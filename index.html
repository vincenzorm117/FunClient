<!doctype html>
<html lang="en" ng-app="Movies">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta charset="UTF-8">
	<title>Movie Buster</title>

	<!-- CSS -->
	<link href="http://fonts.googleapis.com/css?family=Josefin+Slab:100" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/magnific-popup.css"/>
	<link rel="stylesheet" href="css/style.css"/>

	<!-- JS -->
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="http://code.highcharts.com/highcharts.js"></script>
	<script src="angular.min.js"></script>
	<script src="controllers.js"></script>
	<script src="filters.js"></script>
	<script>
	$(function () {
		$('button.trigger').magnificPopup({
		    items: {
		      src: '#statistics'
		    },
		    type: 'inline' // this is default type
		});
	    $( "button.trigger" ).click(function() {
	    	// years
			var	yeararray = g.user.movieYrs.yList;
			var yeardata = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
			for	(i = 0; i < yeararray.length; i++) {
				if(yeararray[i] < 1930) {
					yeardata[9]++;
				}
				else if(yeararray[i] < 1940) {
					yeardata[8]++;
				}
				else if(yeararray[i] < 1950) {
					yeardata[7]++;
				}
				else if(yeararray[i] < 1960) {
					yeardata[6]++;
				}
				else if(yeararray[i] < 1970) {
					yeardata[5]++;
				}
				else if(yeararray[i] < 1980) {
					yeardata[4]++;
				}
				else if(yeararray[i] < 1990) {
					yeardata[3]++;
				}
				else if(yeararray[i] < 2000) {
					yeardata[2]++;
				}
				else if(yeararray[i] < 2010) {
					yeardata[1]++;
				}
				else {
					yeardata[0]++;
				}
			}
			$('#yearchart').highcharts({
		        chart: {
		            type: 'bar'
		        },
		        title: {
		            text: 'Years'
		        },
		        xAxis: {
		            categories: ['2010s', '2000s', '1990s', '1980s', '1970s', '1960s', '1950s', '1940s', '1930s', '1920s'] /*10*/
		        },
		        yAxis: {
		            title: {
		                text: 'Movies Watched'
		            }
		        },
		        series: [{
		            name: 'You',
		            data: yeardata
		        }]
		    });
		    // popular directors
		    for(var y in g.user.posters.pList) {
		    	// alert(g.user.posters.pList[y].Director);
		    	$( ".ul_director" ).append( "<p>"+g.user.posters.pList[y].Director+"</p>" );
		    }
		    // alert(g.user.posters.pList[0].Director);
		});
	});
	</script>
	<!-- For Charts: Old -->
	<!--<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<script src="js/chart.js"></script>
	<script src="js/highcharts.js"></script>
	<script src="js/modules/data.js"></script>
	<script src="js/modules/drilldown.js"></script>-->
</head>
<body class="body" ng-controller="MovieController">

	<button class="trigger"></button>

	<div id="statistics" class="white-popup mfp-hide">
		<div id="yearchart" class="data"></div>
		<div class="data director">
			<h3>Your Favorite Directors</h3>
			<ul class="ul_director">
				
			</ul>
		</div>
		<div class="data categories">
			<h3>Your Favorite Categories</h3>
			<ul>
				<li>Adventure</li>
				<li>Si-Fi</li>
				<li>Adventure</li>
			</ul>
		</div>
	</div>

	<div class="container_top">
		<div style="text-align:center;">
			<table style="display: inline-block">
				<tr>
					<td class="time_values">{{user.time.Day()}}:</td>
					<td class="time_values">{{user.time.Hour()}}:</td>
					<td class="time_values">{{user.time.Min()}} </td>
				</tr>
				<tr>
					<td class="time_labels padRight">DAYS</td>
					<td class="time_labels padRight">HOURS</td>
					<td class="time_labels">MINUTES</td>
				</tr>
			</table>
		</div>
	</div>

	<div class="container_main">
		<form ng-submit="search(string)">
        	<input class="time" type="text" ng-model="string" placeholder="...." ng-change="search(string)">
       </form>

		<div class="sel">
			<span class="single_item" ng-repeat="item in result">
				<div class="img_overlay">
					<div class="temp" ng-click="addMovie(item)">
						<img ng-src="{{item.Poster}}" alt="{{item.Title}}">
						<div class="overlay_text">
							{{item.Title | cut:true:20:' ...'}}
						</div>
					</div class="temp">
				</div>
			</span>
		</div>
	</div>

	<div class="container_main">
		<div class="sel">
			<h2>Currently Selected Movies</h2>
			<span class="single_item" ng-repeat="mov in user.posters.pList">
				<div class="single_item">
					<img ng-src="{{mov.Poster}}" alt="added">
				</div>
			</span>
		</div>
	</div>

</body>
</html>
